Name
----

Traffic_Lights


Synopsys
--------
Модуль имеет входной пакетный потоковый интерфейс Avalon-ST Sink и
выходной пакетный потоковый интерфейс Avalon-ST source. Также модуль имеет
контрольно-статусные регистры, в которые должна быть записана строка, по которой
будет производиться поиск.

Модуль должен помечать все пакеты в которых нашлась искомая строка
используя сигнал channel выходного интерфейса. Код пометки -- “1”. Все остальные
пакеты сопровождаются нулем.

Для создания интерфейса управления модулем предлагается использовать шаблон
csr-модуля, который мы разработали в классе.


input clk_i  1 Тактовый сигнал
input srst_i  1 Cинхронный сброс
// Avalon-MM Slave (csr interface)
output csr_waitrequest_o  1 backpressure интерфейса. Пока активен, master будет удерживать команду, адрес и данные
input csr_address_i 2 Адрес регистра (по 4-байтным словам)
input csr_write_i 1 Команда записи
input csr_writedata_i 32 Данные для записи
input csr_read_i 1 Команда чтения
output csr_readdata_o 32 Ответ на команду чтения
output csr_readdatavalid_o 1 Подтверждение ответа
// Avalon-ST Sink
output ast_ready_o 1 Согласно спецификации
// Avalon-Streaming sink
input ast_data_i 64
input ast_valid_i 1
input ast_startofpacket_i 1
input ast_endofpacket_i 1
input ast_empty_i 3
// Avalon-ST Source
input ast_ready_i 1 Согласно спецификации
// Avalon-Streaming source
output ast_data_o 64
output ast_valid_o 1
output ast_startofpacket_o 1
output ast_endofpacket_o 1
output ast_empty_o 3
output ast_channel_o 1 Используем для передачи флага принадлежности пакета к фильтруемой группе.
	input  wire  [2:0]  cmd_type_i,

Specification
-------------

Интерфейс модуля
Параметры:
* BLINK_HALF_PERIOD   - Длительность полупериода мигания в миллисекундах
   для режимов "зелёный мигает" и "неуправляемый переход"
* GREEN_BLINKS_NUM    - Кол-во периодов мигания в состоянии "зеленый мигает", статический
* RED_YELLOW_TIME     - Время нахождения в состоянии "красный+желтый", статический
* RED_TIME_DEFAULT    - Время нахождения в состоянии "красный" по умолчанию
* YELLOW_TIME_DEFAULT - Время нахождения в состоянии "желтый" по умолчанию
* GREEN_TIME_DEFAULT  - Время нахождения в состоянии "зеленый" по умолчанию

Входы:
* clk_i  - вход тактовой частоты, для корректной работы нужна частота 1KHz
* srst_i - входной сигнал синхронного сброса

* cmd_type_i [3]  - входные данные
* cmd_data_i [16] - вход данных для команды
* cmd_valid_i     - вход валидности принимаемых данных

Выходы:
* red_o    - красный сигнал включен
* yellow_o - желтый сигнал включен
* green_o  - зелёный сигнал включен

Команды:
* 3'd0 - включение автоматического режима модуля
* 3'd1 - выключение модуля, все выходы отключены
* 3'd2 - переход в режим "неуправляемый переход" (мигающий жёлтый)
* 3'd3 - установка времени горения красного сигнала (в мс)
* 3'd4 - установка времени горения жёлтого сигнала (в мс)
* 3'd5 - установка времени горения зелёного сигнала (в мс)


Description
-----------

После сброса модуль стартует в автоматическом режиме и переключает выходные сигналы в
 циклической последовательности "красный > красный + жёлтый > зелёный > зелёный
 мигающий > жёлтый > красный ...".

Модуль принимает команды на выключение, включение в автоматический режим и переход
 в режим "неуправляемый переход". Последний режим индицируется жёлтым мигающим сигналом.

Длительность нахождения в режимах "красный", "жёлтый" и "зелёный" может быть изменена
 с помощью соответствующих команд и передачи времени горения на вход cmd_data_i (в мс).
 При включении модуля устанавливаются значения по умолчанию.


Files
-----

* rtl/traffic_lights.sv --  Основной модуль, реализующий заявленный функционал
* tb/tb.sv              --  Тестбенч, демонстрируюший пример работы модуля
* quartus/TOP.sv        --  Тестовый модуль верхнего уровня для сборки проекта


TODO
----

* None


Notes
-----

None


Authors
-------

[GorosVi](https://github.com/GorosVi)


Copyright
---------

None

